
{% extends 'base.html.twig' %}

{% block title %}Recipe Details{% endblock %}

{% block body %}
    <div class="container mt-2">

        <div class="recipe-wrapper">
            <div class="recipe-container">
                <div class="recipe-container__card">
                    <h2>{{ recipe.name }}</h2>
                    <div class="recipe-container__image">
                        {% if recipe.photo is empty %}
                            <img src="https://placehold.co/400x300/9bdc28/white?text=Delicious+Recipe" alt="{{ recipe.name }}">
                        {% else %}
                            <img src="{{ asset('pictures/' ~ recipe.photo ) }}" alt="{{ recipe.name }}" onerror="this.src='https://placehold.co/400x300/9bdc28/white?text=Delicious+Recipe'">
                        {% endif %}
                    </div>
                    <div class="recipe-container__content">
                        <h2>{{ recipe.name }}</h2>
                        <p>{{ recipe.description }}</p>
                        
                        <div class="ingredients">
                            <h3>Ingredients:</h3>
                            <p>{{ recipe.ingredients }}</p>
                        </div>
                        <div class="calories">
                            <h3>Calories:</h3>
                            <span>{{ recipe.calories }} kcal</span>
                        </div>
                        <div class="prep-time">
                            <h3>Preparation Time:</h3>
                            <span>{{ recipe.preparationTime }} minutes</span>
                        </div>
                        <div class="cooking-time">
                            <h3>Cooking Time:</h3>
                            <span>{{ recipe.cookingTime }} minutes</span>
                        </div>
                        <div class="type">
                            <h3>Dietary Preferences:</h3>
                            <span>{{ recipe.type }}</span>
                        </div>
                        
                        {% if recipe.link %}
                        <a href="{{ recipe.link }}" target="_blank" class="btn btn-primary mt-3">See Full Recipe</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="ms-4 mt-4 button-group">
            {% if is_granted("ROLE_ADMIN") and recipe.status == '1' %}
                <a href="{{ path('app_approved_recipes') }}" class="btn btn-secondary">Back to List</a>
                <a href="{{ path('admin_app_recipe_edit', {'id': recipe.id}) }}" class="btn btn-warning">Edit</a>
                {{ include('recipe/_delete_form.html.twig') }}
            {% elseif recipe.status == '0' %}
                <a href="{{ path('admin_app_pending') }}" class="btn btn-secondary">Back to List</a>
                <a href="{{ path('admin_app_recipe_edit', {'id': recipe.id}) }}" class="btn btn-warning">Edit</a>
                <a href="{{ path('admin_app_approve', {'id': recipe.id}) }}" class="btn btn-success">Approve</a>
                {{ include('recipe/_delete_form.html.twig') }}
            {% elseif userId == recipe.author.id %}
                <a href="{{ path('app_approved_recipes') }}" class="btn btn-secondary">Back to List</a>
                <a href="{{ path('app_recipe_edit', {'id': recipe.id}) }}" class="btn btn-warning">Edit</a>
                {{ include('recipe/_delete_form.html.twig') }}
            {% else %}
                <a href="{{ path('app_approved_recipes') }}" class="btn btn-secondary">Back to List</a>
            {% endif %}
        </div>
        
    </div>
{% endblock %}
