{# {% extends 'base.html.twig' %}

{% block title %}MealPlanner{% endblock %}

{% block body %}
    <h1>MealPlanner</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Meals</th>
                <td>{% for item in  meal_planner.getMealChosen %}
                    <p>
                        <a href="{{ path('app_recipe_show', {'id': item.id}) }}">
                            {{ item.getName }}
                        </a>
                    </p> 
                    {% endfor %}             
            </td>
            <tr>
                <th>Chosen_date</th>
                <td>{{ meal_planner.chosenDate ? meal_planner.chosenDate|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('app_meal_planner_index') }}">back to list</a>

    <a href="{{ path('app_meal_planner_edit', {'id': meal_planner.id}) }}">edit</a>

    {{ include('meal_planner/_delete_form.html.twig') }}
{% endblock %} #}

{% extends 'base.html.twig' %}

{% block title %}Meal Plan Details{% endblock %}

{% block body %}
<div class="container container-view mt-4 mb-4">
    <!-- Запланований день -->
    <div class="form-section mb-4">
        <h4 class="meal-plan-date text-center">
            Planned for: {{ meal_planner.chosenDate ? meal_planner.chosenDate|date('F j, Y') : 'No date specified' }}
        </h4>
    </div>

    <div class="meal-plan-details">
        <!-- Зображення -->
        <div class="meal-plan-image text-center mb-4" style="max-width: 150px; margin: 0 auto;">
            {% set firstRecipeWithPhoto = meal_planner.getMealChosen|filter(r => r.photo is not empty)|first %}
            {% if firstRecipeWithPhoto is defined %}
                <img src="{{ asset('pictures/' ~ firstRecipeWithPhoto.photo) }}" 
                     alt="{{ firstRecipeWithPhoto.name }}" 
                     class="img-fluid meal-plan-image__image"
                     style="width: 100%; height: auto; object-fit: contain;">
            {% else %}
                <img src="https://placehold.co/150x150/9bdc28/white?text=No+Image" 
                     alt="No Image" 
                     class="img-fluid meal-plan-image__image">
            {% endif %}
        </div>

        <!-- Деталі -->
        <div class="meal-plan-details__items">
            <div class="list-items">
                <p class="list-item">Calories <br> 
                    <span class="list-item-style">{{ meal_planner.getMealChosen|first.calories ?? 'N/A' }} kcal</span>
                </p>
                <p class="list-item">Preparation Time <br> 
                    <span class="list-item-style">{{ meal_planner.getMealChosen|first.preparationTime ?? 'N/A' }} min</span>
                </p>
                <p class="list-item">Cooking Time <br> 
                    <span class="list-item-style">{{ meal_planner.getMealChosen|first.cookingTime ?? 'N/A' }} min</span>
                </p>
                <p class="list-item">Author<br> 
                    <span class="list-item-style">
                        {{ meal_planner.getMealChosen|first.author.firstName ?? 'Unknown' }} 
                        {{ meal_planner.getMealChosen|first.author.lastName ?? '' }}
                    </span>
                </p>
            </div>
        </div>

        <!-- Інгредієнти та опис -->
        <div class="col-md-6 mb-3">
            <h3 class="meal-plan-details__title">Ingredients</h3>
            <div class="list-items">
                <p class="list-item-ingredient">
                    {{ meal_planner.getMealChosen|first.ingredients ?? 'No Ingredients Available' }}
                </p>
            </div>
        </div>
        <div class="meal-plan-description mt-3">
            <h3 class="meal-plan-details__title">Description</h3>
            <p class="list-item-ingredient">
                {{ meal_planner.getMealChosen|first.description ?? 'No Description Available' }}
            </p>
        </div>
    </div>

    <!-- Кнопки -->
    <div class="mt-5 d-flex justify-content-center gap-3">
        <!-- Повернутись до списку -->
        <a href="{{ path('app_meal_planner_index') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left me-2"></i>Back to List
        </a>

        <!-- Редагувати -->
        <a href="{{ path('app_meal_planner_edit', {'id': meal_planner.id}) }}" class="btn btn-warning">
            <i class="bi bi-pencil-square me-2"></i>Edit
        </a>

        <!-- Видалити -->
        {{ include('meal_planner/_delete_form.html.twig', { 'class': 'btn btn-danger' }) }}
    </div>
</div>
{% endblock %}
